<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta name="apple-mobile-web-app-title" content="Forge Docs">
      <meta name="application-name" content="Forge Docs">
      <meta name="msapplication-config" content="https://www.minecraftforge.net/forum/uploads/set_resources_3/247441864ab051a2bd22c960e8e7b8b5_browserconfig.xml">
      <meta name="theme-color" content="#ffffff">
      <title>Forge Documentation | 1.12.x</title>
      
      <!-- IMAGES -->
         <link rel="apple-touch-icon" sizes="180x180" href="../../../../static/images/apple-touch-icon.png">
         <link rel="icon" type="image/png" href="../../../../static/images/favicon-32x32.png" sizes="32x32">
         <link rel="icon" type="image/png" href="../../../../static/images/favicon-16x16.png" sizes="16x16">
         <link rel="manifest" href="../../../../static/images/manifest.json">
         <link rel="mask-icon" href="../../../../static/images/safari-pinned-tab.svg" color="#5bbad5">
         <link rel="shortcut icon" href="../../../../static/images/favicon.ico">
      <!-- IMAGES-->
      <!-- CSS -->
         <!-- IMPORTANT -->
         <link rel="stylesheet" href="../../../../a1f20be65b-1.css">
         <link rel="stylesheet" href="../../css/styles_dark.css?version=2" data-theme="dark">
         <link rel="stylesheet" href="../../css/styles_light.css?version=2" data-theme="light">
         <!-- IMPORTANT -->
         <link href="../../../../static/css/badge_only-1.css" rel="stylesheet">
         <link href="../../../../static/css/readthedocs-doc-embed-1.css" rel="stylesheet">
      <!-- CSS -->
      <!-- BOOTSTRAP -->
         <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
         <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"crossorigin="anonymous"></script>
      <!-- BOOTSTRAP -->

      <!-- AJAX LIBS-->
         <script type="text/javascript" src="../../../../ajax/libs/jquery/2.2.4/jquery.min-1.js"></script>
         <script type="text/javascript" src="../../../../ajax/libs/highlight.js/9.12.0/highlight.min-1.js"></script>
         <script type="text/javascript" src="../../../../ajax/libs/jquery-mousewheel/3.1.13/jquery.mousewheel.min-1.js"></script>
         <script type="text/javascript" src="../../../../ajax/libs/jScrollPane/2.0.23/script/jquery.jscrollpane.min-1.js"></script>
         <script type="text/javascript" src="../../../../ajax/libs/stickyfill/1.1.4/stickyfill.min-1.js"></script>
      <!-- AJAX LIBS-->

      <!-- THEME-->
         <script type="text/javascript" src="../../js/theme.js"></script>
         <script type="text/javascript" src="../../js/theme-switch.js"></script>
      <!-- THEME-->

      <!-- TURNED OFF -->
         <!-- <script>var base_url = '.';</script>
         <script src="./readthedocs-data.js"></script>
         <script src="../../static/core/js/readthedocs-doc-embed-1.js"></script>
         <script src="../../static/javascript/readthedocs-analytics-1.js"></script>
         <script src="./search/require.js"></script>
         <script src="./search/search.js"></script> -->
      <!-- TURND OFF-->
      
      <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
      <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
      <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
      <![endif]-->
   </head>
   <body style="background-color: #2B2B2B;">
      <header>
         <div class="wrapper">
            <div class="logo">
               <a style="background-color: #3C3F41; color: #bbb;" href="#" class="open-sidebar"><i class="fa fa-bars"></i></a>
               <a style="background-color: #3C3F41; color: #bbb;" href="." class="logo-image"><img src="../../../../static/images/logo.svg" width="244"></a>
            </div>
            <nav>
               <div class="dropdown">
                  <button class="btn btn-secondary dropdown-toggle" style="background-color: #3C3F41;" type="button" data-bs-toggle="dropdown"
                     aria-expanded="false">
                  Versions
                  </button>
                  <ul class="dropdown-menu" style="background-color: #3C3F41;">
                    </li><a style="background-color: #3C3F41; color: #bbb;" class="dropdown-item " href="../../index.htm">1.20.x</a></li>
                     <!-- </li><a style="background-color: #3C3F41; color: #bbb;" class="dropdown-item " href="../1.19.x/index.htm">1.19.x</a></li>
                     </li><a style="background-color: #3C3F41; color: #bbb;" class="dropdown-item " href="../1.18.x/index.htm">1.18.x</a></li>
                     </li><a style="background-color: #3C3F41; color: #bbb;" class="dropdown-item " href="../1.17.x/index.htm">1.17.x</a></li>
                     </li><a style="background-color: #3C3F41; color: #bbb;" class="dropdown-item " href="../1.16.x/index.htm">1.16.x</a></li>
                     </li><a style="background-color: #3C3F41; color: #bbb;" class="dropdown-item " href="../1.15.x/index.htm">1.15.x</a></li>
                     </li><a style="background-color: #3C3F41; color: #bbb;" class="dropdown-item " href="../1.14.x/index.htm">1.14.x</a></li>
                     </li><a style="background-color: #3C3F41; color: #bbb;" class="dropdown-item " href="../1.13.x/index.htm">1.13.x</a></li> -->
                     </li><a style="background-color: #5d6265; color: #bbb;" class="dropdown-item active" href="./index.htm">1.12.x</a></li>
                  </ul>
               </div>
            </nav>
         </div>
      </header>
<main class="wrapper sidebar-wrapper">
    <div class="sidebar-left sidebar-sticky">
        <aside>
            <section class="sidebar-nav">
                <h2 class="sidebar-heading">
                    <a href="#" class="close-sidebar"><i class="fa fa-bars"></i></a> Navigation
                    <form class="version-selection">
                        <label for="version-selection-dropdown">Version:</label>
                        <select id="version-selection-dropdown" class="version-selection-dropdown" onchange="location = this.value;">
                            
                            <option value="https://mcforge.readthedocs.io/en/1.13.x">1.13.x</option>
                            
                            <option value="https://mcforge.readthedocs.io/en/latest" selected="">1.12.x</option>
                            
                        </select>
                    </form>
                </h2>
                <ul class="section-content scroll-pane">
                    
                    
<li>
    
    <a href="../../index.htm" class="elem-text">Home</a>
    
    
</li>

                    
                    
<li>
    
    <a href="../../styleguide/index.htm" class="elem-text">Style Guide</a>
    
    
</li>

                    
                    
<li class="elem-parent">
    
    <a href="#" class="elem-text toggle-collapsible"><span class="fa fa-plus collapsible-icon"></span> Getting Started</a>
    
    <ul class="nav-collapsible ">
        
        
<li>
    
    <a href="../../gettingstarted/index.htm" class="elem-text">Home</a>
    
    
</li>

        
        
<li>
    
    <a href="../../gettingstarted/structuring/index.htm" class="elem-text">Structuring Your Mod</a>
    
    
</li>

        
        
<li>
    
    <a href="../../gettingstarted/autoupdate/index.htm" class="elem-text">Forge Update Checker</a>
    
    
</li>

        
        
<li>
    
    <a href="../../gettingstarted/dependencymanagement/index.htm" class="elem-text">Dependency Management</a>
    
    
</li>

        
        
<li>
    
    <a href="../../gettingstarted/debugprofiler/index.htm" class="elem-text">Debug Profiler</a>
    
    
</li>

        
    </ul>
</li>

                    
                    
<li class="elem-parent">
    
    <a href="#" class="elem-text toggle-collapsible"><span class="fa fa-plus collapsible-icon"></span> Concepts</a>
    
    <ul class="nav-collapsible ">
        
        
<li>
    
    <a href="../../concepts/sides/index.htm" class="elem-text">Sides</a>
    
    
</li>

        
        
<li>
    
    <a href="../../concepts/resources/index.htm" class="elem-text">Resources</a>
    
    
</li>

        
        
<li>
    
    <a href="../../concepts/registries/index.htm" class="elem-text">Registries</a>
    
    
</li>

        
        
<li>
    
    <a href="../../concepts/jarsigning/index.htm" class="elem-text">The Fingerprint Violation Event</a>
    
    
</li>

        
        
<li>
    
    <a href="../../concepts/internationalization/index.htm" class="elem-text">Internationalization and localization</a>
    
    
</li>

        
    </ul>
</li>

                    
                    
<li class="elem-parent">
    
    <a href="#" class="elem-text toggle-collapsible"><span class="fa fa-plus collapsible-icon"></span> Blocks</a>
    
    <ul class="nav-collapsible ">
        
        
<li>
    
    <a href="../../blocks/blocks/index.htm" class="elem-text">Home</a>
    
    
</li>

        
        
<li>
    
    <a href="../../blocks/states/index.htm" class="elem-text">Intro to Blockstates</a>
    
    
</li>

        
        
<li>
    
    <a href="../../blocks/interaction/index.htm" class="elem-text">Interaction</a>
    
    
</li>

        
    </ul>
</li>

                    
                    
<li class="elem-parent">
    
    <a href="#" class="elem-text toggle-collapsible"><span class="fa fa-plus collapsible-icon"></span> Animation API</a>
    
    <ul class="nav-collapsible ">
        
        
<li>
    
    <a href="../../animation/intro/index.htm" class="elem-text">Intro to the Animation API</a>
    
    
</li>

        
        
<li>
    
    <a href="../../animation/armature/index.htm" class="elem-text">Armatures</a>
    
    
</li>

        
        
<li>
    
    <a href="../../animation/asm/index.htm" class="elem-text">Animation State Machines</a>
    
    
</li>

        
        
<li>
    
    <a href="../../animation/implementing/index.htm" class="elem-text">Using the API</a>
    
    
</li>

        
    </ul>
</li>

                    
                    
<li class="elem-parent">
    
    <a href="#" class="elem-text toggle-collapsible"><span class="fa fa-plus collapsible-icon"></span> Tile Entities</a>
    
    <ul class="nav-collapsible ">
        
        
<li>
    
    <a href="../../tileentities/tileentity/index.htm" class="elem-text">Home</a>
    
    
</li>

        
        
<li>
    
    <a href="../../tileentities/tesr/index.htm" class="elem-text">Special Renderer</a>
    
    
</li>

        
    </ul>
</li>

                    
                    
<li class="elem-parent">
    
    <a href="#" class="elem-text toggle-collapsible"><span class="fa fa-plus collapsible-icon"></span> Items</a>
    
    <ul class="nav-collapsible ">
        
        
<li>
    
    <a href="../../items/items/index.htm" class="elem-text">Home</a>
    
    
</li>

        
        
<li>
    
    <a href="../../items/loot_tables/index.htm" class="elem-text">Loot Tables</a>
    
    
</li>

        
    </ul>
</li>

                    
                    
<li class="elem-parent">
    
    <a href="#" class="elem-text toggle-collapsible"><span class="fa fa-plus collapsible-icon"></span> Models</a>
    
    <ul class="nav-collapsible ">
        
        
<li>
    
    <a href="../../models/introduction/index.htm" class="elem-text">Intro to Models</a>
    
    
</li>

        
        
<li>
    
    <a href="../../models/files/index.htm" class="elem-text">Model Files</a>
    
    
</li>

        
        
<li class="elem-parent">
    
    <a href="#" class="elem-text toggle-collapsible"><span class="fa fa-plus collapsible-icon"></span> Blockstates</a>
    
    <ul class="nav-collapsible ">
        
        
<li>
    
    <a href="../../models/blockstates/introduction/index.htm" class="elem-text">Intro to Blockstate JSONs</a>
    
    
</li>

        
        
<li>
    
    <a href="../../models/blockstates/forgeBlockstates/index.htm" class="elem-text">Forge Blockstate JSON</a>
    
    
</li>

        
    </ul>
</li>

        
        
<li>
    
    <a href="../../models/using/index.htm" class="elem-text">Connecting Blocks and Items to Models</a>
    
    
</li>

        
        
<li>
    
    <a href="../../models/color/index.htm" class="elem-text">Coloring Textures</a>
    
    
</li>

        
        
<li>
    
    <a href="../../models/overrides/index.htm" class="elem-text">Item Property Overrides</a>
    
    
</li>

        
        
<li class="elem-parent">
    
    <a href="#" class="elem-text toggle-collapsible"><span class="fa fa-plus collapsible-icon"></span> Advanced Models</a>
    
    <ul class="nav-collapsible ">
        
        
<li>
    
    <a href="../../models/advanced/introduction/index.htm" class="elem-text">Intro to Advanced Models</a>
    
    
</li>

        
        
<li>
    
    <a href="../../models/advanced/imodel/index.htm" class="elem-text">IModel</a>
    
    
</li>

        
        
<li>
    
    <a href="../../models/advanced/imodelstate%20part/index.htm" class="elem-text">IModelState and IModelPart</a>
    
    
</li>

        
        
<li>
    
    <a href="../../models/advanced/ibakedmodel/index.htm" class="elem-text">IBakedModel</a>
    
    
</li>

        
        
<li>
    
    <a href="../../models/advanced/extended-blockstates/index.htm" class="elem-text">Extended Blockstates</a>
    
    
</li>

        
        
<li>
    
    <a href="../../models/advanced/perspective/index.htm" class="elem-text">Perspective</a>
    
    
</li>

        
        
<li>
    
    <a href="../../models/advanced/itemoverridelist/index.htm" class="elem-text">ItemOverrideList</a>
    
    
</li>

        
        
<li>
    
    <a href="../../models/advanced/icustommodelloader/index.htm" class="elem-text">ICustomModelLoader</a>
    
    
</li>

        
    </ul>
</li>

        
    </ul>
</li>

                    
                    
<li class="elem-parent">
    
    <a href="#" class="elem-text toggle-collapsible"><span class="fa fa-plus collapsible-icon"></span> Rendering</a>
    
    <ul class="nav-collapsible ">
        
        
<li>
    
    <a href="../../rendering/teisr/index.htm" class="elem-text">TileEntityItemStackRenderer</a>
    
    
</li>

        
    </ul>
</li>

                    
                    
<li class="elem-parent">
    
    <a href="#" class="elem-text toggle-collapsible"><span class="fa fa-plus collapsible-icon"></span> Events</a>
    
    <ul class="nav-collapsible ">
        
        
<li>
    
    <a href="../../events/intro/index.htm" class="elem-text">Basic Usage</a>
    
    
</li>

        
    </ul>
</li>

                    
                    
<li class="elem-parent">
    
    <a href="#" class="elem-text toggle-collapsible"><span class="fa fa-plus collapsible-icon"></span> Networking</a>
    
    <ul class="nav-collapsible ">
        
        
<li>
    
    <a href="../../networking/index.htm" class="elem-text">Home</a>
    
    
</li>

        
        
<li>
    
    <a href="../../networking/overview/index.htm" class="elem-text">Overview</a>
    
    
</li>

        
        
<li>
    
    <a href="../../networking/simpleimpl/index.htm" class="elem-text">SimpleImpl</a>
    
    
</li>

        
        
<li>
    
    <a href="../../networking/entities/index.htm" class="elem-text">Entities</a>
    
    
</li>

        
    </ul>
</li>

                    
                    
<li class="elem-parent">
    
    <a href="#" class="elem-text toggle-collapsible"><span class="fa fa-plus collapsible-icon"></span> Data Storage</a>
    
    <ul class="nav-collapsible nav-collapsible-open">
        
        
<li>
    
    <a href="../capabilities/index.htm" class="elem-text">Capabilities</a>
    
    
</li>

        
        
<li>
    
    <a href="../worldsaveddata/index.htm" class="elem-text">World Saved Data</a>
    
    
</li>

        
        
<li class="elem-active elem-toc">
    
    <a href="#extended-entity-properties" class="elem-text">Extended Entity Properties</a>
    
    
    <ul class="table-of-contents">
        
        
        
        <li class="toc-subitem"><a href="#declaration-and-registration">Declaration and Registration</a></li>
        
        <li class="toc-subitem"><a href="#attaching-the-implementation-to-entities">Attaching the Implementation to Entities</a></li>
        
        <li class="toc-subitem"><a href="#making-use-of-the-implementation">Making Use of the Implementation</a></li>
        
        <li class="toc-subitem"><a href="#saving-and-loading-data-from-nbt">Saving and Loading Data from NBT</a></li>
        
        <li class="toc-subitem"><a href="#synchronizing-data-with-clients">Synchronizing Data with Clients</a></li>
        
        <li class="toc-subitem"><a href="#persisting-across-player-deaths">Persisting across Player Deaths</a></li>
        
        
    </ul>
    
</li>

        
        
<li>
    
    <a href="../../config/annotations/index.htm" class="elem-text">Config Annotations</a>
    
    
</li>

        
    </ul>
</li>

                    
                    
<li class="elem-parent">
    
    <a href="#" class="elem-text toggle-collapsible"><span class="fa fa-plus collapsible-icon"></span> Utilities</a>
    
    <ul class="nav-collapsible ">
        
        
<li>
    
    <a href="../../utilities/recipes/index.htm" class="elem-text">Recipes</a>
    
    
</li>

        
        
<li>
    
    <a href="../../utilities/oredictionary/index.htm" class="elem-text">OreDictionary</a>
    
    
</li>

        
        
<li>
    
    <a href="../../utilities/permissionapi/index.htm" class="elem-text">PermissionAPI</a>
    
    
</li>

        
    </ul>
</li>

                    
                    
<li class="elem-parent">
    
    <a href="#" class="elem-text toggle-collapsible"><span class="fa fa-plus collapsible-icon"></span> Effects</a>
    
    <ul class="nav-collapsible ">
        
        
<li>
    
    <a href="../../effects/sounds/index.htm" class="elem-text">Sounds</a>
    
    
</li>

        
    </ul>
</li>

                    
                    
<li class="elem-parent">
    
    <a href="#" class="elem-text toggle-collapsible"><span class="fa fa-plus collapsible-icon"></span> Conventions</a>
    
    <ul class="nav-collapsible ">
        
        
<li>
    
    <a href="../../conventions/versioning/index.htm" class="elem-text">Versioning</a>
    
    
</li>

        
        
<li>
    
    <a href="../../conventions/locations/index.htm" class="elem-text">Locations</a>
    
    
</li>

        
        
<li>
    
    <a href="../../conventions/loadstages/index.htm" class="elem-text">Loading Stages</a>
    
    
</li>

        
    </ul>
</li>

                    
                    
<li class="elem-parent">
    
    <a href="#" class="elem-text toggle-collapsible"><span class="fa fa-plus collapsible-icon"></span> Contributing to Forge</a>
    
    <ul class="nav-collapsible ">
        
        
<li>
    
    <a href="../../forgedev/index.htm" class="elem-text">Getting Started</a>
    
    
</li>

        
        
<li>
    
    <a href="../../forgedev/prguidelines/index.htm" class="elem-text">PR Guidelines</a>
    
    
</li>

        
    </ul>
</li>

                    
                </ul>
            </section>
        </aside>
    </div>

    <div class="sidebar-sticky-wrapper-content">
        <article class="docs-entry">
            
            <h1 id="extended-entity-properties">Extended Entity Properties<a class="headerlink" href="#extended-entity-properties" title="Permanent link"> </a></h1>
<p>Extended entity properties allow attaching data to entities.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This system has been <em>deprecated</em> in favor of the <a href="../capabilities/index.htm">Capability</a> system.</p>
</div>
<h2 id="declaration-and-registration">Declaration and Registration<a class="headerlink" href="#declaration-and-registration" title="Permanent link"> </a></h2>
<p>The basis of the EEPs is the <code>IExtendedEntityProperties</code> interface. This interface provides the basic methods required for managing the extended data:</p>
<ul>
<li><code>init</code>: Allows the implementation to have knowledge about the entity it&rsquo;s attached to, and the world this entity is loaded into.</li>
<li><code>saveNBTData</code>: Allows the implementation to store data in the save file, to be loaded when the entity gets loaded into the world.</li>
<li><code>loadNBTData</code>: Allows the implementation to read the previously saved data for this entity.</li>
</ul>
<p>An implementation will have a class implementing this interface, and instances of this class will be attached to the entities, ready to store any required data.</p>
<p>The implementation will need to make use of events in order to attach the IEEP to entities, and optionally any other required features. To help with encapsulation, you may want to create an inner class for handling those events. In the example, I created a <code>register()</code> method to help with that.</p>
<p>A basic skeleton to get started:</p>
<pre class="highlight"><code class="language-java">public class ExampleEntityProperty implements IExtendedEntityProperties {
  public static final String PROP_NAME = ExampleMod.MODID + "_ExampleEntityData";

  public static void register() {
    MinecraftForge.EVENT_BUS.register(new Handler());
  }

  // IExtendedEntityProperties methods go here

  public static class Handler {
    // Event handlers will go here
  }
}</code></pre>

<h2 id="attaching-the-implementation-to-entities">Attaching the Implementation to Entities<a class="headerlink" href="#attaching-the-implementation-to-entities" title="Permanent link"> </a></h2>
<p>In order to attach the extended property to an entity, it is done by handling the <code>EntityEvent.EntityConstructing</code> event, and if the entity is of interest, using the <code>Entity#registerExtendedProperties</code> method.</p>
<p>In order to uniquely identify your property and avoid duplication, the method takes a string parameter with an identifier for the property. A good practice is to include the modid in this string, so that it will not collide with other mods.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If the same property identifier is added twice, Forge will append a number to it, and return this modified identifier from the <code>registerExtendedProperties</code> method. If you don&rsquo;t want that to happen, you can use <code>Entity#getExtendedProperties</code> to check if an IEEP with that name was already added.</p>
</div>
<p>In order to handle this event, you could do something like this:</p>
<pre class="highlight"><code class="language-java">@SubscribeEvent
public void entityConstruct(EntityEvent.EntityConstructing e) {
  if (e.entity instanceof EntityPlayer) {
    if (e.entity.getExtendedProperties(PROP_NAME) == null) {
      e.entity.registerExtendedProperties(PROP_NAME, new ExampleEntityProperty());
    }
  }
}</code></pre>

<h2 id="making-use-of-the-implementation">Making Use of the Implementation<a class="headerlink" href="#making-use-of-the-implementation" title="Permanent link"> </a></h2>
<p>To make use of the extended data, the instance of the IEEP implementation has to be obtained from the Entity, and because the entity could have been unloaded or may have changed dimensions, it is not safe to cache the references.</p>
<p>To obtain the IEEP reference, one would use <code>Entity#getExtendedProperties</code>, with the same property ID specified on registration. The return value, if not <code>null</code>, is the instance of <code>IExtendedEntityProperties</code> added during entity construction.</p>
<p>A good idea is to create a static <code>get</code> method in your IEEP implementation, that will automatically obtain the instance, and cast it to your implementation class. It can be as simple as:</p>
<pre class="highlight"><code class="language-java">public static ExampleEntityProperty get(Entity p) {
  return (ExampleEntityProperty) p.getExtendedProperties(PROP_NAME);
}</code></pre>

<h2 id="saving-and-loading-data-from-nbt">Saving and Loading Data from NBT<a class="headerlink" href="#saving-and-loading-data-from-nbt" title="Permanent link"> </a></h2>
<p>Forge allows all IEEPs attached to an entity to save and load themselves. However, keep in mind that the NBT tag provided in the <code>saveNBTData</code> and <code>loadNBTData</code> methods is a global tag for the entity, and may contain data for other IEEPs, along with all the data from the entity itself.</p>
<p>There are some cases where an IEEP may benefit from accessing this global data, but for the most common use cases, it is important to avoid colliding with existing data, preferably by storing the data in a nested tag, using an unique name for it (such as the name used to identify the IEEP).</p>
<p>Your code may look a bit like this:</p>
<pre class="highlight"><code class="language-java">@Override
public void saveNBTData(NBTTagCompound compound) {
  NBTTagCompound propertyData = new NBTTagCompound();

  // Write data to propertyData

  compound.setTag(PROP_NAME, propertyData);
}

@Override
public void loadNBTData(NBTTagCompound compound) {
  if(compound.hasKey(PROP_NAME, Constants.NBT.TAG_COMPOUND)) {
    NBTTagCompound propertyData = compound.getCompoundTag(PROP_NAME);

    // Read data from propertyData
  }
}</code></pre>

<h2 id="synchronizing-data-with-clients">Synchronizing Data with Clients<a class="headerlink" href="#synchronizing-data-with-clients" title="Permanent link"> </a></h2>
<p>By default, the entity data is not sent to clients. In order to change this, the mods have to manage their own synchronization code using packets.</p>
<p>There are three different situation in which you may want to send synchronization packets, all of them optional:</p>
<ol>
<li>When the entity spawns in the world, you may want to share the initialization-assigned values with the clients.</li>
<li>When the stored data changes, you may want to notify some or all of the watching clients.</li>
<li>When a new client starts viewing the entity, you may want to notify it of the existing data.</li>
</ol>
<p>Refer to the <a href="../../networking/index.htm">Networking</a> page for more information on implementing the network packets.</p>
<p>For example:</p>
<pre class="highlight"><code class="language-java">private void dataChanged() {
  if(!world.isRemote) {
    EntityTracker tracker = ((WorldServer)world).getEntityTracker();
    ExampleEntityPropertySync message = new ExampleEntityPropertySync(this);

    for (EntityPlayer entityPlayer : tracker.getTrackingPlayers(entity)) {
      ExampleMod.channel.sendTo(message, (EntityPlayerMP)entityPlayer);
    }
  }
}

private void entitySpawned() {
  dataChanged();
}

private void playerStartedTracking(EntityPlayer entityPlayer) {
  ExampleMod.channel.sendTo(new ExampleEntityPropertySync(this), (EntityPlayerMP)entityPlayer);
}</code></pre>

<p>And the corresponding event handlers:</p>
<pre class="highlight"><code class="language-java">@SubscribeEvent
public void entityJoinWorld(EntityJoinWorldEvent e) {
  ExampleEntityProperty data = ExampleEntityProperty.get(e.entity);
  if (data != null)
    data.entitySpawned();
}

@SubscribeEvent
public void playerStartedTracking(PlayerEvent.StartTracking e) {
  ExampleEntityProperty data = ExampleEntityProperty.get(e.target);
  if (data != null)
    data.playerStartedTracking(e.entityPlayer);
}</code></pre>

<h2 id="persisting-across-player-deaths">Persisting across Player Deaths<a class="headerlink" href="#persisting-across-player-deaths" title="Permanent link"> </a></h2>
<p>By default, the entity data does not persist on death. In order to change this, the data has to be manually copied when the player entity is cloned during the respawn process.</p>
<p>This can be done by handling the <code>PlayerEvent.Clone</code> event. In this event, the <code>wasDead</code> field can be used to distinguish between respawning after death, and returning from the End. This is important because the data will already exist, so care has to be taken to not duplicate values when returning from the End dimension.</p>
<pre class="highlight"><code class="language-java">@SubscribeEvent
public void onClonePlayer(PlayerEvent.Clone e) {
  if(e.wasDeath) {
    NBTTagCompound compound = new NBTTagCompound();
    ExampleEntityProperty.get(e.original).saveNBTData(compound);
    ExampleEntityProperty.get(e.entityPlayer).loadNBTData(compound);
  }
}</code></pre>
            
        </article>
        
    </div>
</main>
<div class="wrapper">
    <footer  style="color: #bbb;">
        <p> &copy; Copyright by <a  style="color: #bbb;" href="https://www.github.com/gamingoninsulin">GamingOnInsulin</a></p>
        <!-- <div class="theme-switch-wrapper">
            Enable Dark Theme
            <label class="theme-switch">
                <input type="checkbox">
                <span class="slider round"></span>
            </label>
        </div> -->
    </footer>
</div>
</body>
</html>